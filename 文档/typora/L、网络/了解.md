数据链路层  点对点

网络层   主机到主机

传输层 进程到进程



HTTP

从Web服务器传输超文本到本地浏览器的传输协议

client           ----------------建立tcp连接---------------------------------------------    server

​                    ---发送请求：请求方法、协议版本、URI、MIME样式----->

​				    <-- 返回状态行：协议版本、状态码、MIME样式的消息---- 

http/1.0 

   每一次http的请求/响应都会建立一个新的tcp连接，这个连接的建立需要经常性的开销，并未带有实际有用的数据，只是为了保证连接的可靠性，实时性较差。

http/1.1

​	只建立一次tcp连接，重复使用它传输一系列的请求/响应消息，减少了连接的次数和经常性的链接开销

|                | TCP                                    | UDP                                  |
| -------------- | -------------------------------------- | ------------------------------------ |
| 是否连接       | 面向连接                               | 面向非连接                           |
| 传输可靠性     | 可靠                                   | 不可靠                               |
| 应用场合       | 传输大量的数据，对可靠性要求较高的场合 | 传送少量数据、对可靠性要求不高的场景 |
| 速度（实时性） | 慢                                     | 快                                   |

三次握手、四次挥手

>SYN --synchronous建立联机
>ACK --acknowledgement确认
>PSH --push传送
>FIN --finish结束
>RST --reset重置
>URG --urgent紧急
>Sequence number 顺序号码
>Acknowledge number 确定号码

![img](D:\myself\springboot-example\文档\typora\images\network01.png)

- 第一次握手：客户端发送syn包（syn=m），进入SYN_SEND状态，等待服务器确认
- 第二次握手：服务器接收到客户端的syn包，进行确认（ack=m+1），并发送syn包（syn=n）。即发送ack+syn包给客户端，进入SYN_RECV状态
- 第三次握手：客户端接收到SYN+ACK包，再发送一个SYN包（syn=n+1），服务器和客户端进入ESTABLEISHED状态。完成三次握手，客户端与服务器开始传送数据

  客户端和服务器彼此都知道自己的消息被接收了，因此链接是可靠的。

- 第一次挥手：客户端发送一个FIN（fin=k），表示关闭和服务器的链接
- 第二次挥手：服务器接收FIN并返回ACK（ack=k+1）
- 第三次挥手：服务器关闭和客户端的链接，发送一个FIN（fin=j）给客户端
- 第四次挥手：客户端接受FIN也返回ACK（ack=j+1），完成断链